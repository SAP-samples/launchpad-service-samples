{
  "title": "JSON schema for SAP.APP Namespace",

  "$schema": "http://json-schema.org/draft-04/schema#",

  "description": "Represents general application attributes",
  "type": "object",
  "additionalProperties": false,
  "required": ["_version", "id", "type", "title", "applicationVersion"],
  "properties": {
    "_version": {
      "description": "Application attributes format version. It is managed by namespace owner",
      "type": "string",
      "enum" :["1.1.0"]
    },

    "sourceTemplate": {
      "description": "Represents the template from which the app was generated",
      "type": "object",
      "required": ["id", "version"],
      "properties": {
        "id": {
          "description": "Represents id of the template from which the app was generated ",
          "type": "string"
        },
        "version": {
          "description": "Represents the version of the template from which the app was generated",
          "type": "string"
        }
      }
    },

    "id": {
      "description": "Represents mandatory unique app identifier which must correspond to component 'id/namespace'",
      "$ref": "#/definitions/id_def"
    },

    "type": {
      "description": "Represents type of an application and can be application or component or library",
      "type": "string",
      "enum": ["application", "component", "library"]
    },

    "i18n": {
      "description": "Represents path inside the app to the properties file containing text symbols for the Descriptor",
      "type": "string",
      "default": "i18n/i18n.properties"
    },

    "applicationVersion": {
      "description": "Represents mandatory version of the app",
      "type": "object",
      "required": ["version"],
      "properties": {
        "version": {
          "$ref": "#/definitions/version"
        }
      }
    },

    "embeds": {
      "description": "Represents array of relative paths to the nested manifest.json's (mandatory if it contains nested 'manifest.json')",
      "type": "array",
      "items": {
        "type": "string"
      }
    },

    "embeddedBy": {
      "description": "Represents relative path back to the manifest.json of an embedding component or library (mandatory for nested 'manifest.json')",
      "type": "string"
    },

    "title": {
      "description": "Represents language-dependent mandatory title",
      "$ref": "#/definitions/i18n_key"
    },

    "description": {
      "description": "Represents language-dependent description",
      "$ref": "#/definitions/i18n_key"
    },

    "tags": {
      "description": "Represents array of keywords",
      "type": "object",
      "additionalProperties": true,
      "required": ["keywords"],
      "properties": {
        "keywords": {
          "$ref": "#/definitions/tag"
        }
      }
    },

    "ach": {
      "description": "Represents application component hierarchy",
      "type": "string",
      "pattern": "^([a-zA-Z]{2,3})(\\-[a-zA-Z0-9]{2,6})*$"
    },

    "dataSources": {
      "description": "Represents used data sources with a unique key/alias",
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^[a-zA-Z0-9_\\.\\-]*$": {
          "$ref": "#/definitions/dataSource"
        }
      }
    },

    "cdsViews": {
      "description": "Represents array of directly used CDS views, which only to be added if directly used via INA protocol and not if used via OData service",
      "type": "array",
      "items": {
        "type": "string"
      }
    },

    "resources": {
      "description": "Represents reference to a file (naming convention is resources.json) which contains list with all resources which the app needs",
      "type": "string",
      "enum": ["resources.json"]
    },

    "offline": {
      "description": "Represents indicator whether the app is running offline. Possible values are true or false (default)",
      "type": "boolean",
      "default": false
    },

    "crossNavigation": {
      "description": "Represents cross navigation for inbound and outbound targets",
      "type": "object",
      "properties": {
        "inbounds": {
          "description": "Represents cross navigation for inbound target",
          "type": "array",
          "items":{
            "$ref": "#/definitions/inbound"
          }
        },
        "outbounds":{
          "description": "Represents cross navigation for outbound target",
          "type": "array",
          "items":{
            "$ref": "#/definitions/outbound"
          }
        }
      }
    }
  },
  "definitions": {

    "version": {
      "type": "string"
    },

    "id_def": {
      "type": "string",
      "maxLength": 70
    },

    "i18n_key": {
      "type": "string",
      "pattern": "^\\{\\{[^\\W][\\w\\.\\-]*\\}\\}$"
    },

    "tag":{
      "type": "array",
      "items": {
        "$ref": "#/definitions/i18n_key"
      }
    },

    "dataSource": {
      "type": "object",
      "additionalProperties": false,
      "required": ["uri"],
      "properties": {
        "uri":{
          "description": "Represents uri of the data source",
          "type": "string"
        },
        "type": {
          "description": "Represents type of the data source. The supported types are OData, ODataAnnotation, INA, XML, JSON",
          "type": "string",
          "enum": ["OData", "ODataAnnotation","INA", "XML", "JSON"],
          "default": "OData"
        },
        "settings": {
          "description": "Represents data source type specific attributes (key, value pairs)",
          "$ref": "#/definitions/setting"
        }
      }
    },

    "setting": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "odataVersion": {
          "description": "Represents version of OData: 2.0 is default",
          "type": "string",
          "enum": ["2.0", "4.0"]
        },
        "localUri": {
          "description": "Represents path to local meta data document or annotation uri",
          "type": "string"
        },
        "annotations": {
          "description": "Represents  array of annotation which references an existing data source of type ODataAnnotation",
          "type": "array",
          "items": {
            "type":"string"
          }
        }
      }
    },

    "inbound":{
      "type": "object",
      "required": ["semanticObject", "action"],
      "properties": {
        "semanticObject": {
          "description": "Represents semantic object",
          "type": "string"
        },
        "action": {
          "description": "Represents action an the semantic object",
          "type": "string"
        },
        "icon" :{
          "description": "Represents icon",
          "type": "string"
        },
        "title": {
          "description": "Represents language-dependent - different languages via server API or on client, see comments below",
          "$ref": "#/definitions/i18n_key"
        },

        "indicatorDataSource": {
          "description": "Represents data source",
          "type": "object",
          "required": ["dataSource", "path"],
          "properties": {
            "dataSource": {
              "type": "string"
            },
            "path": {
              "type": "string"
            },
            "refresh": {
              "description": "Represents refresh interval",
              "type": "number"
            }
          }
        },

        "deviceTypes": {
          "description": "Represents device types for which application is developed",
          "$ref": "#/definitions/deviceType"
        },

        "signatures": {
          "$ref": "#/definitions/signature"
        }
      }
    },

    "outbound":{
      "type": "object",
      "required": ["semanticObject", "action"],
      "properties": {
        "semanticObject": {
          "description": "Represents semantic object",
          "type": "string"
        },
        "action": {
          "description": "Represents action an the semantic object",
          "type": "string"
        },
        "parameters": {
          "description": "Represents parameters for outbound targets",
          "type": "array",
          "items":{
            "$ref": "#/definitions/parameter"
          }
        }
      }
    },

    "parameter": {
      "type": "object",
      "properties": {
        "name":{
          "type": "string"
        }
      }
    },

    "deviceType": {
      "type": "object",
      "description": "Represents device types on which the app is running",
      "additionalProperties": false,
      "properties": {
        "desktop": {
          "description": "Represents indicator whether desktop device is supported, default true",
          "type": "boolean"
        },
        "tablet": {
          "description": "Represents indicator whether tablet device is supported, default true",
          "type": "boolean"
        },
        "phone": {
          "description": "Represents indicator whether phone device is supported, default true",
          "type": "boolean"
        }
      }
    },

    "signature": {
      "description": "Represents signature for inbound targets ",
      "type": "object",
      "required": ["name"],
      "additionalProperties": false,
      "properties":{
        "name": {
          "type": "string"
        },
        "required":{
          "type": "boolean"
        },
        "pattern": {
          "description": "Represents regular expression",
          "type": "string"
        },
        "defaultValue": {
          "type": "string"
        }
      }
    }
  }
}