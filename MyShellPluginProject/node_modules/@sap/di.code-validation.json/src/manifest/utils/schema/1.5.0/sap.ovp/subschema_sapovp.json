{
  "title": "JSON schema for SAP.OVP Namespace",

  "description": "Represents OVP specific attributes",
  "type": "object",
  "required": [ "cards"],
  "dependencies": {
    "globalFilterModel": [
      "globalFilterEntityType"
    ],
    "globalFilterEntityType": [
      "globalFilterModel"
    ]
  },
  "additionalProperties": false,
  "properties": {
    "_version": {
      "description": "Represents attributes format version. It is managed by namespace owner",
      "type": "string",
      "enum": ["1.1.0", "1.2.0"]
    },
    "globalFilterModel": {
      "description": "Represents the name of global filter OData model, which  contains entities definition that are relevant for global filters",
      "type": "string",
      "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@]*$"
    },
    "globalFilterEntityType": {
      "description": "Represents the entity to use as global filter in the smart filter bar control",
      "type": "string",
      "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@]*$"
    },
    "smartVariantRequired": {
      "description": "Represents a switch to activate smart variant management in the global filters",
      "type": "boolean",
      "default": true
    },
    "containerLayout": {
      "description": "Represents the layout of the card container",
      "type": "string",
      "default": "easyScan",
      "enum": ["easyScan", "dashboard", "fixed", "resizable"]
    },
    "showDateInRelativeFormat": {
      "description": "Represents a switch to Enable or disable Relative or Normal date formating in ovp application",
      "type": "boolean",
      "default": true
    },
    "enableLiveFilter": {
      "description": "Represents the switch to activate live update in the global filters, else manual update will be required",
      "type": "boolean",
      "default": true
    },
    "cards": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^[a-zA-Z0-9_\\.\\-]+$": {
          "$ref": "#/definitions/card"
        }
      }
    },
    "dashboardLayout": {
      "description": "This property is now deprecated. Please use 'resizableLayout' property.",
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^cols_[0-9]+$": {
          "$ref": "#/definitions/resizableLayoutVariant"
        }
      }
    },
    "resizableLayout": {
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^cols_[0-9]+$": {
          "$ref": "#/definitions/resizableLayoutVariant"
        }
      }
    }
  },
  "definitions": {
    "card": {
      "description": "Represents the card attributes",
      "type": "object",
      "required": ["template"],
      "additionalProperties": false,
      "properties": {
        "sequencePos": {
          "description": "Represents the position of the card in the sequence",
          "type": "integer"
        },
        "model": {
          "description": "Represents the model for the card",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@]*$"
        },
        "template": {
          "description": "Represents the card component path to use for this card",
          "type": "string",
          "pattern": "^[a-zA-Z0-9\\.]+$"
        },
        "settings": {
          "$ref": "#/definitions/card_setting"
        },
		"tabs": {
		   "description": "Represents the card with view switch control",
           "type": "array",
           "minItems": 1,
           "items": { "$ref": "#/definitions/tab_setting" }
        }
      }
    },
    "card_setting": {
      "description": "Represents the card specific properties - properties that are passed to the card",
      "type": "object",
      "required": ["title"],
      "additionalProperties": true,
      "properties": {
        "category": {
          "description": "Represents the category of the card- used in the card header",
          "type": "string",
          "pattern": "^\\{\\{[^\\W\\.\\-][\\w\\.\\-]*\\}\\}$"
        },
        "title": {
          "description": "Represents language-dependent title of the card - used in the card header",
          "type": "string",
          "pattern": "^\\{\\{[^\\W\\.\\-][\\w\\.\\-]*\\}\\}$"
        },
        "subTitle": {
          "description": "Represents language-dependent subtitle of the card - used in the card header",
          "type": "string",
          "pattern": "^\\{\\{[^\\W\\.\\-][\\w\\.\\-]*\\}\\}$"
        },
        "entitySet": {
          "description": "Represents the entity set that will be displayed in this card",
          "type": "string",
          "pattern": "^[a-zA-Z0-9\\_]+$"
        },
        "staticContent": {
          "description": "Represents the static content that will be displayed in this card",
          "type": "array",
          "items": {"type": "object"}
        },
        "listFlavor": {
          "description": "Represents the flavor of the list to use in this card. The flavor can be bar chart, carousel or standard",
          "type": "string",
          "enum": ["standard", "bar", "carousel"]
        },
        "listType": {
          "description": "Represents the type of list to use for this card. The list can be extended to display more information or condensed to take up less space on the card",
          "type": "string",
          "enum": ["extended", "condensed"]
        },
        "sortBy": {
          "description": "Represents the sort key for the entity set",
          "type": "string"
        },
        "sortOrder": {
          "description": "Represents the sort order for the entity set",
          "type": "string",
          "enum": ["ascending", "descending"]
        },
        "annotationPath": {
          "description": "Represents the annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "selectionAnnotationPath": {
          "description": "Represents the selection annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "chartAnnotationPath": {
          "description": "Represents the chart annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "presentationAnnotationPath": {
          "description": "Represents the presentation annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "dataPointAnnotationPath": {
          "description": "Represents the data point annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "identificationAnnotationPath": {
          "description": "Represents the identification annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "ignoreSapText": {
          "description": "Represents the flag to indicate priority of number formatting over sap text",
          "type": "boolean",
          "default": false
        },
        "defaultSpan": {
          "$ref": "#/definitions/defaultSpanDef"
        },
        "requireAppAuthorization": {
          "description": "Represents the cards for which authorization is required",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "objectStreamCardsSettings": {
          "$ref": "#/definitions/objectStreamCardsSettingsDef"
        },
        "enableLocaleCurrencyFormatting": {
          "description": "Represents the flag to indicate the use of object number/smart field",
          "type": "boolean",
          "default": "false"
        },
        "navigation": {
          "description": "Represents the configuration to alter the navigation mode in OVP Analytical Cards",
          "type": "string",
          "enum": ["dataPointNav", "chartNav"]
        }
      }
    },
    "objectStreamCardsSettingsDef": {
      "description": "Represents the Object Stream properties - properties that are passed to the Object Stream cards",
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "showFirstActionInFooter": {
          "description": "Represents the flag to show first action in footer of the Quickview cards",
          "type": "boolean",
          "default": false
        }
      }
    },
    "defaultSpanDef": {
      "description": "Represents the card default grid size in columns and rows",
      "oneOf": [
        {
          "type": "object",
          "additionalProperties": false,
          "required": ["cols", "rows"],
          "properties": {
            "cols": {
              "description": "Represents the number of the number of grid columns",
              "type": "integer"
            },
            "rows": {
              "description": "Represents the number of the number of grid rows",
              "type": "integer"
            }
          }
        },
        {
          "type": "string",
          "enum": ["auto"]
        }
      ]
    },
	"tab_setting": {
	  "description": "Represents the tab specific properties - properties that are passed to a particular tab in a card",
      "type": "object",
      "additionalProperties": true,
      "properties": {
		"annotationPath": {
          "description": "Represents the annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "selectionAnnotationPath": {
          "description": "Represents the selection annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "chartAnnotationPath": {
          "description": "Represents the chart annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "presentationAnnotationPath": {
          "description": "Represents the presentation annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "dataPointAnnotationPath": {
          "description": "Represents the data point annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
        "identificationAnnotationPath": {
          "description": "Represents the identification annotation path",
          "type": "string",
          "pattern": "^[a-zA-Z0-9_\\.\\-\\|\\@\\#]*$"
        },
		"value": {
          "description": "Represents the drop down value to be shown",
          "type": "string"
        }
		
	  }
	},
    "resizableLayoutVariant": {
      "description": "Represents the dashboard/resizable layout variant",
      "type": "object",
      "additionalProperties": false,
      "patternProperties": {
        "^[a-zA-Z0-9_\\.\\-]+$": {
          "$ref": "#/definitions/resizableLayoutVariantCardProperties"
        }
      }
    },

    "resizableLayoutVariantCardProperties": {
      "required": ["col", "row", "colSpan", "rowSpan"],
      "description": "Represents the card properties is a layout variant",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "col": {
          "description": "Represents the grid column",
          "type": "integer"
        },
        "row": {
          "description": "Represents the grid row",
          "type": "integer"
        },
        "colSpan": {
          "description": "Represents the column span",
          "type": "integer"
        },
        "rowSpan": {
          "description": "Represents the row span",
          "type": "integer"
        },
        "visible": {
          "description": "Represents the visibility of the card",
          "type": "boolean",
          "default": true
        }
      }
    }
  }
}